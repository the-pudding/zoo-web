parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"or4r":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3],e="Expected a function",n=NaN,r="[object Symbol]",i=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,f=/^0o[0-7]+$/i,c=parseInt,a="object"==typeof t&&t&&t.Object===Object&&t,s="object"==typeof self&&self&&self.Object===Object&&self,v=a||s||Function("return this")(),l=Object.prototype,p=l.toString,b=Math.max,m=Math.min,y=function(){return v.Date.now()};function d(t,n,r){var i,o,u,f,c,a,s=0,v=!1,l=!1,p=!0;if("function"!=typeof t)throw new TypeError(e);function d(e){var n=i,r=o;return i=o=void 0,s=e,f=t.apply(r,n)}function g(t){var e=t-a;return void 0===a||e>=n||e<0||l&&t-s>=u}function O(){var t=y();if(g(t))return x(t);c=setTimeout(O,function(t){var e=n-(t-a);return l?m(e,u-(t-s)):e}(t))}function x(t){return c=void 0,p&&i?d(t):(i=o=void 0,f)}function T(){var t=y(),e=g(t);if(i=arguments,o=this,a=t,e){if(void 0===c)return function(t){return s=t,c=setTimeout(O,n),v?d(t):f}(a);if(l)return c=setTimeout(O,n),d(a)}return void 0===c&&(c=setTimeout(O,n)),f}return n=h(n)||0,j(r)&&(v=!!r.leading,u=(l="maxWait"in r)?b(h(r.maxWait)||0,n):u,p="trailing"in r?!!r.trailing:p),T.cancel=function(){void 0!==c&&clearTimeout(c),s=0,i=a=o=c=void 0},T.flush=function(){return void 0===c?f:x(y())},T}function j(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function g(t){return!!t&&"object"==typeof t}function O(t){return"symbol"==typeof t||g(t)&&p.call(t)==r}function h(t){if("number"==typeof t)return t;if(O(t))return n;if(j(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=j(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var r=u.test(t);return r||f.test(t)?c(t.slice(2),r?2:8):o.test(t)?n:+t}module.exports=d;
},{}],"WEtf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r={android:function(){return navigator.userAgent.match(/Android/i)},blackberry:function(){return navigator.userAgent.match(/BlackBerry/i)},ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},opera:function(){return navigator.userAgent.match(/Opera Mini/i)},windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return r.android()||r.blackberry()||r.ios()||r.opera()||r.windows()}},e=r;exports.default=e;
},{}],"hZBy":[function(require,module,exports) {
"use strict";function e(e){return r(e)||n(e)||t()}function t(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function n(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function r(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function o(e){return document.querySelector(e)}function s(t){return e((arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelectorAll(t))}function c(t,n){return e(t.querySelectorAll(n))}function a(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)".concat(t.split(" ").join("|"),"(\\b|$)"),"gi")," ")}function l(e,t){e.classList?e.classList.add(t):e.className="".concat(e.className," ").concat(t)}function i(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )".concat(t,"( |$)"),"gi").test(e.className)}function u(e,t){t=t||0;var n=e.getBoundingClientRect().top+t,r=(window.pageYOffset||document.documentElement.scrollTop)+n;window.scrollTo(0,r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.select=o,exports.selectAll=s,exports.find=c,exports.removeClass=a,exports.addClass=l,exports.hasClass=i,exports.jumpTo=u;
},{}],"U9xJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("./dom");function t(){(0,e.selectAll)("[target='_blank']").forEach(function(e){return e.setAttribute("rel","noopener")})}
},{"./dom":"hZBy"}],"xZJw":[function(require,module,exports) {
"use strict";function t(t){return new Promise(function(e,n){var o=t.split(".").pop();"csv"===o?d3.csv("".concat(t)).then(e).catch(n):"json"===o||"geojson"===o?d3.json("assets/data/".concat(t)).then(e).catch(n):n(new Error("unsupported file type for: ".concat(t)))})}function e(e){if("string"==typeof e)return t(e);var n=e.map(t);return Promise.all(n)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"TAPd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("./load-data"));function a(t){return t&&t.__esModule?t:{default:t}}var n=d3.select(".grid"),e=[];function c(){}function o(){var t=d3.select(this),a=t.attr("data-id");"png"===t.attr("data-type")?(t.attr("src","https://pudding-data-processing.s3.amazonaws.com/zoo-cams/output/".concat(a,".gif")),t.attr("data-type","gif")):(t.attr("src","https://pudding-data-processing.s3.amazonaws.com/zoo-cams/stills/".concat(a,".png")),t.attr("data-type","png"))}function r(){n.selectAll(".cam").data(e).join(function(t){var a=t.append("div").attr("class",function(t){return"cam cam--".concat(t.id)}),n=a.append("img").attr("class","cam__display").attr("data-id",function(t){return t.id}).attr("data-type","png").attr("src",function(t){return"https://pudding-data-processing.s3.amazonaws.com/zoo-cams/stills/".concat(t.id,".png")});a.append("p").text(function(t){return"ID: ".concat(t.id)}),a.append("p").text(function(t){return t.animal}),a.append("p").text(function(t){return t.facility}),n.on("click",o)})}function i(){(0,t.default)("https://raw.githubusercontent.com/the-pudding/zoo-data/master/zoos.csv").then(function(t){e=t,r()})}var s={init:i,resize:c};exports.default=s;
},{"./load-data":"xZJw"}],"VKu2":[function(require,module,exports) {
"use strict";function e(e){return new Promise(function(r,n){var o=new Image;o.onload=function(){return r(o)},o.onerror=function(){return n("error loading ".concat(e))},o.src=e})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=e;exports.default=r;
},{}],"CRRU":[function(require,module,exports) {
!function(){"use strict";if("object"==typeof window)if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var t=function(t){for(var e=window.document,n=i(e);n;)n=i(e=n.ownerDocument);return e}(),e=[],n=null,o=null;s.prototype.THROTTLE_TIMEOUT=100,s.prototype.POLL_INTERVAL=null,s.prototype.USE_MUTATION_OBSERVER=!0,s._setupCrossOriginUpdater=function(){return n||(n=function(t,n){o=t&&n?l(t,n):{top:0,bottom:0,left:0,right:0,width:0,height:0},e.forEach(function(t){t._checkForIntersections()})}),n},s._resetCrossOriginUpdater=function(){n=null,o=null},s.prototype.observe=function(t){if(!this._observationTargets.some(function(e){return e.element==t})){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(t.ownerDocument),this._checkForIntersections()}},s.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter(function(e){return e.element!=t}),this._unmonitorIntersections(t.ownerDocument),0==this._observationTargets.length&&this._unregisterInstance()},s.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},s.prototype.takeRecords=function(){var t=this._queuedEntries.slice();return this._queuedEntries=[],t},s.prototype._initThresholds=function(t){var e=t||[0];return Array.isArray(e)||(e=[e]),e.sort().filter(function(t,e,n){if("number"!=typeof t||isNaN(t)||t<0||t>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return t!==n[e-1]})},s.prototype._parseRootMargin=function(t){var e=(t||"0px").split(/\s+/).map(function(t){var e=/^(-?\d*\.?\d+)(px|%)$/.exec(t);if(!e)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(e[1]),unit:e[2]}});return e[1]=e[1]||e[0],e[2]=e[2]||e[0],e[3]=e[3]||e[1],e},s.prototype._monitorIntersections=function(e){var n=e.defaultView;if(n&&-1==this._monitoringDocuments.indexOf(e)){var o=this._checkForIntersections,r=null,s=null;if(this.POLL_INTERVAL?r=n.setInterval(o,this.POLL_INTERVAL):(h(n,"resize",o,!0),h(e,"scroll",o,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in n&&(s=new n.MutationObserver(o)).observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this._monitoringDocuments.push(e),this._monitoringUnsubscribes.push(function(){var t=e.defaultView;t&&(r&&t.clearInterval(r),c(t,"resize",o,!0)),c(e,"scroll",o,!0),s&&s.disconnect()}),e!=(this.root&&this.root.ownerDocument||t)){var u=i(e);u&&this._monitorIntersections(u.ownerDocument)}}},s.prototype._unmonitorIntersections=function(e){var n=this._monitoringDocuments.indexOf(e);if(-1!=n){var o=this.root&&this.root.ownerDocument||t;if(!this._observationTargets.some(function(t){var n=t.element.ownerDocument;if(n==e)return!0;for(;n&&n!=o;){var r=i(n);if((n=r&&r.ownerDocument)==e)return!0}return!1})){var r=this._monitoringUnsubscribes[n];if(this._monitoringDocuments.splice(n,1),this._monitoringUnsubscribes.splice(n,1),r(),e!=o){var s=i(e);s&&this._unmonitorIntersections(s.ownerDocument)}}}},s.prototype._unmonitorAllIntersections=function(){var t=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var e=0;e<t.length;e++)t[e]()},s.prototype._checkForIntersections=function(){if(this.root||!n||o){var t=this._rootIsInDom(),e=t?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach(function(o){var i=o.element,s=u(i),h=this._rootContainsTarget(i),c=o.entry,a=t&&h&&this._computeTargetAndRootIntersection(i,s,e),l=o.entry=new r({time:window.performance&&performance.now&&performance.now(),target:i,boundingClientRect:s,rootBounds:n&&!this.root?null:e,intersectionRect:a});c?t&&h?this._hasCrossedThreshold(c,l)&&this._queuedEntries.push(l):c&&c.isIntersecting&&this._queuedEntries.push(l):this._queuedEntries.push(l)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},s.prototype._computeTargetAndRootIntersection=function(e,i,r){if("none"!=window.getComputedStyle(e).display){for(var s,h,c,a,f,d,g,m,v=i,_=p(e),b=!1;!b&&_;){var w=null,y=1==_.nodeType?window.getComputedStyle(_):{};if("none"==y.display)return null;if(_==this.root||9==_.nodeType)if(b=!0,_==this.root||_==t)n&&!this.root?!o||0==o.width&&0==o.height?(_=null,w=null,v=null):w=o:w=r;else{var I=p(_),E=I&&u(I),T=I&&this._computeTargetAndRootIntersection(I,E,r);E&&T?(_=I,w=l(E,T)):(_=null,v=null)}else{var R=_.ownerDocument;_!=R.body&&_!=R.documentElement&&"visible"!=y.overflow&&(w=u(_))}if(w&&(s=w,h=v,c=void 0,a=void 0,f=void 0,d=void 0,g=void 0,m=void 0,c=Math.max(s.top,h.top),a=Math.min(s.bottom,h.bottom),f=Math.max(s.left,h.left),d=Math.min(s.right,h.right),m=a-c,v=(g=d-f)>=0&&m>=0&&{top:c,bottom:a,left:f,right:d,width:g,height:m}||null),!v)break;_=_&&p(_)}return v}},s.prototype._getRootRect=function(){var e;if(this.root)e=u(this.root);else{var n=t.documentElement,o=t.body;e={top:0,left:0,right:n.clientWidth||o.clientWidth,width:n.clientWidth||o.clientWidth,bottom:n.clientHeight||o.clientHeight,height:n.clientHeight||o.clientHeight}}return this._expandRectByRootMargin(e)},s.prototype._expandRectByRootMargin=function(t){var e=this._rootMarginValues.map(function(e,n){return"px"==e.unit?e.value:e.value*(n%2?t.width:t.height)/100}),n={top:t.top-e[0],right:t.right+e[1],bottom:t.bottom+e[2],left:t.left-e[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},s.prototype._hasCrossedThreshold=function(t,e){var n=t&&t.isIntersecting?t.intersectionRatio||0:-1,o=e.isIntersecting?e.intersectionRatio||0:-1;if(n!==o)for(var i=0;i<this.thresholds.length;i++){var r=this.thresholds[i];if(r==n||r==o||r<n!=r<o)return!0}},s.prototype._rootIsInDom=function(){return!this.root||f(t,this.root)},s.prototype._rootContainsTarget=function(e){return f(this.root||t,e)&&(!this.root||this.root.ownerDocument==e.ownerDocument)},s.prototype._registerInstance=function(){e.indexOf(this)<0&&e.push(this)},s.prototype._unregisterInstance=function(){var t=e.indexOf(this);-1!=t&&e.splice(t,1)},window.IntersectionObserver=s,window.IntersectionObserverEntry=r}function i(t){try{return t.defaultView&&t.defaultView.frameElement||null}catch(e){return null}}function r(t){this.time=t.time,this.target=t.target,this.rootBounds=a(t.rootBounds),this.boundingClientRect=a(t.boundingClientRect),this.intersectionRect=a(t.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0}),this.isIntersecting=!!t.intersectionRect;var e=this.boundingClientRect,n=e.width*e.height,o=this.intersectionRect,i=o.width*o.height;this.intersectionRatio=n?Number((i/n).toFixed(4)):this.isIntersecting?1:0}function s(t,e){var n,o,i,r=e||{};if("function"!=typeof t)throw new Error("callback must be a function");if(r.root&&1!=r.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),o=this.THROTTLE_TIMEOUT,i=null,function(){i||(i=setTimeout(function(){n(),i=null},o))}),this._callback=t,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(r.rootMargin),this.thresholds=this._initThresholds(r.threshold),this.root=r.root||null,this.rootMargin=this._rootMarginValues.map(function(t){return t.value+t.unit}).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}function h(t,e,n,o){"function"==typeof t.addEventListener?t.addEventListener(e,n,o||!1):"function"==typeof t.attachEvent&&t.attachEvent("on"+e,n)}function c(t,e,n,o){"function"==typeof t.removeEventListener?t.removeEventListener(e,n,o||!1):"function"==typeof t.detatchEvent&&t.detatchEvent("on"+e,n)}function u(t){var e;try{e=t.getBoundingClientRect()}catch(n){}return e?(e.width&&e.height||(e={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}),e):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function a(t){return!t||"x"in t?t:{top:t.top,y:t.top,bottom:t.bottom,left:t.left,x:t.left,right:t.right,width:t.width,height:t.height}}function l(t,e){var n=e.top-t.top,o=e.left-t.left;return{top:n,left:o,height:e.height,width:e.width,bottom:n+e.height,right:o+e.width}}function f(t,e){for(var n=e;n;){if(n==t)return!0;n=p(n)}return!1}function p(e){var n=e.parentNode;return 9==e.nodeType&&e!=t?i(e):n&&11==n.nodeType&&n.host?n.host:n&&n.assignedSlot?n.assignedSlot.parentNode:n}}();
},{}],"vL5c":[function(require,module,exports) {
var define;
var global = arguments[3];
var e,t=arguments[3];!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof e&&e.amd?e(n):t.scrollama=n()}(this,function(){"use strict";function e(e){return"scrollama__debug-offset--"+e}function t(t){!function(t){var n=t.id,o=t.offsetVal,r=t.stepClass,i=document.createElement("div");i.id=e(n),i.className="scrollama__debug-offset",i.style.position="fixed",i.style.left="0",i.style.width="100%",i.style.height="0",i.style.borderTop="2px dashed black",i.style.zIndex="9999";var s=document.createElement("p");s.innerHTML='".'+r+'" trigger: <span>'+o+"</span>",s.style.fontSize="12px",s.style.fontFamily="monospace",s.style.color="black",s.style.margin="0",s.style.padding="6px",i.appendChild(s),document.body.appendChild(i)}({id:t.id,offsetVal:t.offsetVal,stepClass:t.stepEl[0].className})}function n(e){var t=e.id,n=e.index,o=e.state,r="scrollama__debug-step--"+t+"-"+n,i=document.getElementById(r+"_above"),s=document.getElementById(r+"_below"),a="enter"===o?"block":"none";i&&(i.style.display=a),s&&(s.style.display=a)}return function(){var o=["stepAbove","stepBelow","stepProgress","viewportAbove","viewportBelow"],r={},i={},s=null,a=[],l=[],c=[],f=[],u=0,p=0,d=0,v=0,g=0,m=0,x=!1,b=!1,w=!1,h=!1,y=!1,E=!1,M="down",I="percent",A=[];function C(e){console.error("scrollama error: "+e)}function O(){r={stepEnter:function(){},stepExit:function(){},stepProgress:function(){}},i={}}function S(e){return e.getBoundingClientRect().top+window.pageYOffset-(document.body.clientTop||0)}function B(e){return+e.getAttribute("data-scrollama-index")}function H(){window.pageYOffset>g?M="down":window.pageYOffset<g&&(M="up"),g=window.pageYOffset}function k(e){i[e]&&i[e].forEach(function(e){return e.disconnect()})}function _(){var t,n;d=window.innerHeight,t=document.body,n=document.documentElement,v=Math.max(t.scrollHeight,t.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight),p=u*("pixels"===I?1:d),x&&(l=a.map(function(e){return e.getBoundingClientRect().height}),c=a.map(S),b&&D()),w&&function(t){var n=t.id,o=t.offsetMargin,r=t.offsetVal,i="pixels"===t.format?"px":"",s=e(n),a=document.getElementById(s);a.style.top=o+"px",a.querySelector("span").innerText=""+r+i}({id:s,offsetMargin:p,offsetVal:u,format:I})}function N(e){if(e&&!b){if(!x)return C("scrollama error: enable() called before scroller was ready"),void(b=!1);D()}!e&&b&&o.forEach(k),b=e}function P(e,t){var n=B(e);void 0!==t&&(f[n].progress=t);var o={element:e,index:n,progress:f[n].progress};"enter"===f[n].state&&r.stepProgress(o)}function R(e,t){if("above"===t)for(var n=0;n<e;n+=1){var o=f[n];"enter"!==o.state&&"down"!==o.direction?(T(a[n],"down",!1),q(a[n],"down")):"enter"===o.state&&q(a[n],"down")}else if("below"===t)for(var r=f.length-1;r>e;r-=1){var i=f[r];"enter"===i.state&&q(a[r],"up"),"down"===i.direction&&(T(a[r],"up",!1),q(a[r],"up"))}}function T(e,t,o){void 0===o&&(o=!0);var i=B(e),a={element:e,index:i,direction:t};f[i].direction=t,f[i].state="enter",y&&o&&"down"===t&&R(i,"above"),y&&o&&"up"===t&&R(i,"below"),r.stepEnter&&!A[i]&&(r.stepEnter(a,f),w&&n({id:s,index:i,state:"enter"}),E&&(A[i]=!0)),h&&P(e)}function q(e,t){var o=B(e),i={element:e,index:o,direction:t};h&&("down"===t&&f[o].progress<1?P(e,1):"up"===t&&f[o].progress>0&&P(e,0)),f[o].direction=t,f[o].state="exit",r.stepExit(i,f),w&&n({id:s,index:o,state:"exit"})}function V(e){var t=e[0];H();var n=t.isIntersecting,o=t.boundingClientRect,r=t.target,i=o.top,s=o.bottom,a=i-p,l=s-p,c=B(r),u=f[c];n&&a<=0&&l>=0&&"down"===M&&"enter"!==u.state&&T(r,M),!n&&a>0&&"up"===M&&"enter"===u.state&&q(r,M)}function Y(e){var t=e[0];H();var n=t.isIntersecting,o=t.boundingClientRect,r=t.target,i=o.top,s=o.bottom,a=i-p,l=s-p,c=B(r),u=f[c];n&&a<=0&&l>=0&&"up"===M&&"enter"!==u.state&&T(r,M),!n&&l<0&&"down"===M&&"enter"===u.state&&q(r,M)}function F(e){var t=e[0];H();var n=t.isIntersecting,o=t.target,r=B(o),i=f[r];n&&"down"===M&&"down"!==i.direction&&"enter"!==i.state&&(T(o,"down"),q(o,"down"))}function j(e){var t=e[0];H();var n=t.isIntersecting,o=t.target,r=B(o),i=f[r];n&&"up"===M&&"down"===i.direction&&"enter"!==i.state&&(T(o,"up"),q(o,"up"))}function z(e){var t=e[0];H();var n=t.isIntersecting,o=t.intersectionRatio,r=t.boundingClientRect,i=t.target,s=r.bottom;n&&s-p>=0&&P(i,+o)}function L(){i.stepProgress=a.map(function(e,t){var n=l[t]-p+"px 0px "+(-d+p)+"px 0px",o=function(e){for(var t=Math.ceil(e/m),n=[],o=1/t,r=0;r<t;r+=1)n.push(r*o);return n}(l[t]),r=new IntersectionObserver(z,{rootMargin:n,threshold:o});return r.observe(e),r})}function D(){o.forEach(k),i.viewportAbove=a.map(function(e,t){var n=v-c[t],o=p-d-l[t],r=new IntersectionObserver(F,{rootMargin:n+"px 0px "+o+"px 0px"});return r.observe(e),r}),i.viewportBelow=a.map(function(e,t){var n=-p-l[t],o=p-d+l[t]+v,r=new IntersectionObserver(j,{rootMargin:n+"px 0px "+o+"px 0px"});return r.observe(e),r}),i.stepAbove=a.map(function(e,t){var n=-p+l[t],o=new IntersectionObserver(V,{rootMargin:n+"px 0px "+(p-d)+"px 0px"});return o.observe(e),o}),i.stepBelow=a.map(function(e,t){var n=-p,o=p-d+l[t],r=new IntersectionObserver(Y,{rootMargin:n+"px 0px "+o+"px 0px"});return r.observe(e),r}),h&&L()}function G(e){return!(!e||1!==e.nodeType)&&(function(e){var t=window.getComputedStyle(e);return("scroll"===t.overflowY||"auto"===t.overflowY)&&e.scrollHeight>e.clientHeight}(e)?e:G(e.parentNode))}var J={};return J.setup=function(e){var n=e.step,o=e.offset;void 0===o&&(o=.5);var r=e.progress;void 0===r&&(r=!1);var i=e.threshold;void 0===i&&(i=4);var l=e.debug;void 0===l&&(l=!1);var c=e.order;void 0===c&&(c=!0);var p,d,v,g,b,M=e.once;if(void 0===M&&(M=!1),O(),d=(p="abcdefghijklmnopqrstuv").length,v=Date.now(),s=""+[0,0,0].map(function(e){return p[Math.floor(Math.random()*d)]}).join("")+v,g=n,void 0===b&&(b=document),!(a="string"==typeof g?Array.from(b.querySelectorAll(g)):g instanceof Element?[g]:g instanceof NodeList?Array.from(g):g instanceof Array?g:[]).length)return C("no step elements"),J;var I=a.reduce(function(e,t){return e||G(t.parentNode)},!1);return I&&console.error("scrollama error: step elements cannot be children of a scrollable element. Remove any css on the parent element with overflow: scroll; or overflow: auto; on elements with fixed height.",I),w=l,h=r,y=c,E=M,J.offsetTrigger(o),m=Math.max(1,+i),x=!0,w&&t({id:s,stepEl:a,offsetVal:u}),a.forEach(function(e,t){return e.setAttribute("data-scrollama-index",t)}),f=a.map(function(){return{direction:null,state:null,progress:0}}),_(),J.enable(),J},J.resize=function(){return _(),J},J.enable=function(){return N(!0),J},J.disable=function(){return N(!1),J},J.destroy=function(){N(!1),O()},J.offsetTrigger=function(e){if(null===e)return u;if("number"==typeof e)I="percent",e>1&&C("offset value is greater than 1. Fallback to 1."),e<0&&C("offset value is lower than 0. Fallback to 0."),u=Math.min(Math.max(0,e),1);else if("string"==typeof e&&e.indexOf("px")>0){var t=+e.replace("px","");isNaN(t)?(C("offset value must be in 'px' format. Fallback to 0.5."),u=.5):(I="pixels",u=t)}else C("offset value does not include 'px'. Fallback to 0.5."),u=.5;return J},J.onStepEnter=function(e){return"function"==typeof e?r.stepEnter=e:C("onStepEnter requires a function"),J},J.onStepExit=function(e){return"function"==typeof e?r.stepExit=e:C("onStepExit requires a function"),J},J.onStepProgress=function(e){return"function"==typeof e?r.stepProgress=e:C("onStepProgress requires a function"),J},J}});
},{}],"Na4G":[function(require,module,exports) {
"use strict";function t(t){return n(t)||e(t)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function e(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function n(t){if(Array.isArray(t)){for(var r=0,e=new Array(t.length);r<t.length;r++)e[r]=t[r];return e}}function o(r){return t(new Set(r))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;
},{}],"drU0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var v='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">\n<path d="M0 4v24h32v-24h-32zM6 26h-4v-4h4v4zM6 18h-4v-4h4v4zM6 10h-4v-4h4v4zM24 26h-16v-20h16v20zM30 26h-4v-4h4v4zM30 18h-4v-4h4v4zM30 10h-4v-4h4v4zM12 10v12l8-6z"></path>\n</svg>';exports.default=v;
},{}],"hR3q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=d3.select('[data-js="modal"]'),e=t.select(".modal__info"),a=t.select(".modal__video");function s(c,l,i,n){t.classed("is-hidden",!1),e.select(".modal__info-animal").text(i),e.select(".modal__info-facility").text(n);var d=l.filter(function(t){return t.animal===i&&t.facility===n})[0];e.select(".modal__info-help"),t.select(".facility").text(n),t.select(".donate").attr("href",d.donate),d.adopt?t.select(".adopt").attr("href",d.adopt).classed("is-hidden",!1):t.select(".adopt").classed("is-hidden",!0);var o=t.select(".modal__info-fact");d.fact?(o.classed("is-hidden",!1),o.select(".facility").text(n),o.select(".fact__text").text(d.fact),o.select(".fact__link").attr("href",d.learn)):o.classed("is-hidden",!0);var r=c.filter(function(t){return t.animal===i})[0].camera.filter(function(t){return+t!=+d.id});a.select(".large").attr("src","https://pudding-data-processing.s3.amazonaws.com/zoo-cams/output/".concat(d.id,".gif"));var f=a.select(".modal__video--carousel");if(r.length>0){f.classed("is-hidden",!1);var u=l.map(function(t){return[+t.id,t.facility]}),p=new Map(u),_=f.selectAll(".g-carousel").data(r,function(t){return+t}).join(function(t){var e=t.append("div").attr("class","g-carousel");return e.append("img").attr("class","carousel__display").on("click",function(t,e,a){d3.event.stopPropagation();var n=d3.select(a[e]).attr("data-id"),d=p.get(+n);s(c,l,i,d)}),e.append("span").attr("class","carousel__facility"),e});_.selectAll(".carousel__facility").text(function(t){return p.get(+t)}),_.selectAll("img").attr("data-id",function(t){return t}).attr("src",function(t){return"https://pudding-data-processing.s3.amazonaws.com/zoo-cams/stills/".concat(+t,".png")})}else f.classed("is-hidden",!0)}function c(){t.classed("is-hidden",!0)}t.on("click",c);var l={setup:s,close:c};exports.default=l;
},{}],"CAFt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./load-data"));function r(t){return t&&t.__esModule?t:{default:t}}function n(t,r){return o(t)||a(t,r)||e()}function e(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(t,r){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],e=!0,a=!1,o=void 0;try{for(var u,i=t[Symbol.iterator]();!(e=(u=i.next()).done)&&(n.push(u.value),!r||n.length!==r);e=!0);}catch(c){a=!0,o=c}finally{try{e||null==i.return||i.return()}finally{if(a)throw o}}return n}}function o(t){if(Array.isArray(t))return t}var u=d3.selectAll(".globe"),i=u.selectAll("svg"),c=d3.geoOrthographic(),l=d3.geoPath(c),s=5,h={type:"Sphere"},f=1e3,p=null,d=null,v=null,M=[0,0],y=[0,0],g=[0,0,0],m=[0,0,0];function A(t,r){var e=n(t,4),a=e[0],o=e[1],u=e[2],i=e[3],c=n(r,4),l=c[0],s=c[1],h=c[2],f=c[3];l-=a,s-=o,h-=u,f-=i;var p=new Array(4);return function(t){var r=Math.hypot(p[0]=a+l*t,p[1]=o+s*t,p[2]=u+h*t,p[3]=i+f*t);return p[0]/=r,p[1]/=r,p[2]/=r,p[3]/=r,p}}function I(t,r){var e=n(t,4),a=e[0],o=e[1],u=e[2],i=e[3],c=n(r,4),l=c[0],s=c[1],h=c[2],f=c[3],p=a*l+o*s+u*h+i*f;if(p<0&&(l=-l,s=-s,h=-h,f=-f,p=-p),p>.9995)return A([a,o,u,i],[l,s,h,f]);var d=Math.acos(Math.max(-1,Math.min(1,p))),v=new Array(4),M=Math.hypot(l-=a*p,s-=o*p,h-=u*p,f-=i*p);return l/=M,s/=M,h/=M,f/=M,function(t){var r=d*t,n=Math.sin(r),e=Math.cos(r);return v[0]=a*e+l*n,v[1]=o*e+s*n,v[2]=u*e+h*n,v[3]=i*e+f*n,v}}function b(t){var r=n(t,3),e=r[0],a=r[1],o=r[2];e*=Math.PI/360,a*=Math.PI/360,o*=Math.PI/360;var u=Math.sin(e),i=Math.cos(e),c=Math.sin(a),l=Math.cos(a),s=Math.sin(o),h=Math.cos(o);return[i*l*h+u*c*s,u*l*h-i*c*s,i*c*h+u*l*s,i*l*s-u*c*h]}function P(t){var r=n(t,4),e=r[0],a=r[1],o=r[2],u=r[3];return[180*Math.atan2(2*(e*a+o*u),1-2*(a*a+o*o))/Math.PI,180*Math.asin(Math.max(-1,Math.min(1,2*(e*o-u*a))))/Math.PI,180*Math.atan2(2*(e*u+a*o),1-2*(o*o+u*u))/Math.PI]}function j(t,r){var n=I(b(t),b(r));return function(t){return P(n(t))}}function w(t,r){if(d){var n=d.features.filter(function(t){return"CA"===t.properties.iso_a2})[0],e=(d.features.filter(function(t){return"US"===t.properties.iso_a2})[0],c([r,t])),a=c.invert(e),o=d3.geoCentroid(n),u=c.invert(o);console.log({manual:e,manualInv:a,cent:o,centInv:u}),M=y,g=m,m=[-(y=[r,t])[0],s-y[1],0];var i=j(g,m);console.log({p1:M,p2:y,r1:g,r2:m,iv:i,matched:n});var h=p.selectAll(".path-country");d3.transition().duration(f).tween("render",function(){return function(t){c.rotate(i(t)),h.attr("d",l)}})}}function _(t){i.selectAll(".marker").data(t).join(function(t){return t.append("circle").attr("class","marker").attr("r",15)})}function x(){}function S(t){(p=i.append("g").attr("class","g-map")).append("path").attr("class","path-sphere"),p.append("g").attr("class","g-countries");c.fitSize([100,100],t).center([0,0]).rotate([0,0]),p.select(".path-sphere").attr("d",l(h)).lower(),p.select(".g-countries").selectAll(".path-country").data(t.features).join(function(t){return t.append("path").attr("class",function(t){return"path-country country-".concat(t.properties.iso_a2)})}).attr("d",l),d=t}function O(r){v=r,(0,t.default)("custom.geojson").then(function(t){return S(t)})}var k={init:O,update:w,resize:x};exports.default=k;
},{"./load-data":"xZJw"}],"S90c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=l(require("./load-data")),n=l(require("./utils/load-image-promise"));require("intersection-observer");var a=l(require("scrollama")),e=l(require("./utils/unique")),i=l(require("./videoSVG")),r=l(require("./modal")),c=l(require("./globe"));function l(t){return t&&t.__esModule?t:{default:t}}function o(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);n&&(e=e.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,e)}return a}function s(t){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?o(a,!0).forEach(function(n){u(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(a).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function u(t,n,a){return n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t}var d=d3.selectAll('[data-js="arrangement"]'),f=d.selectAll('[data-js="arrangement__islands"]'),p=d3.selectAll('[data-js="navigation"]'),m=p.select(".animal"),g=d3.select(".update"),h=null,v=null,y=null,b=100,x=848,A=!1,w=!1,j=!1,_=1228,O=1200,P={1:"22.3%",2:"17.6%",3:"12.2%",4:"9.4%",5:"7.7%"},k={1:"22.3%",2:"14%",3:"10%",4:"7%",5:"5%"},z=(0,a.default)(),q=(0,a.default)();function E(t){var n=d3.select(t),a=n.attr("data-id");"png"===n.attr("data-type")?(n.attr("src","https://pudding-data-processing.s3.amazonaws.com/zoo-cams/output/".concat(a,".gif")),n.attr("data-type","gif")):(n.attr("src","https://pudding-data-processing.s3.amazonaws.com/zoo-cams/stills/".concat(a,".png")),n.attr("data-type","png"))}function X(t){d.selectAll(".g-anno").classed("in-focus",!1);var n=d3.select(t).attr("data-animal");d.selectAll('[data-list="'.concat(n,'"]')).classed("in-focus",!0)}function D(){q.setup({step:".g-island",offset:.8,debug:!1}).onStepEnter(function(t){var n=t.element,a=(t.index,t.direction,d3.select(n).data()[0].values[0]),e=a.lat,i=a.long;c.default.update(+e,+i)})}function S(){z.setup({step:".cam__display",debug:!1}).onStepEnter(function(t){var n=t.element;t.index,t.direction;if(E(n),d.selectAll(".cam__display").classed("in-focus",!1),d3.select(n).classed("in-focus",!0),X(n),A){m.selectAll("ul").classed("is-hidden",!0);var a=d3.select(n).attr("data-animal"),e=m.selectAll("ul").filter(function(t,n,e){return d3.select(e[n]).attr("data-animal")===a});e.classed("is-hidden",!1),e.node().scrollIntoView({behavior:"smooth",block:"center",inline:"start"})}}).onStepExit(function(t){var n=t.element;t.index,t.direction;E(n),d3.select(n).classed("in-focus",!1)})}function R(t){return new Promise(function(n){v=t[0].map(function(t){return s({},t,{index:+t.index,positionY:+t.positionY,camera:t.camera.split(", ")})}),y=d3.nest().key(function(t){return t.tile}).entries(v),h=t[1],n({mappedData:v,nestedData:y,links:t[1]})})}function Y(){var t=d3.select(this).attr("data-animal");console.log({animal:t});var n=d.selectAll('[data-list="'.concat(t,'"]')).selectAll(".animal--facility.selected").node().innerText.trim();r.default.setup(v,h,t,n)}function G(t,n){var a=t.index,e=2*t.positionY,i="R"===t.positionX?2:1;return a%2==0?"".concat(e," / ").concat(i+1," / span 1 / span 1"):"".concat(e," / ").concat(i," / span 1 / span 1 ")}function H(t){var n=A?1:.7;console.log({EXHIBIT_RATIO:n}),console.log("new height");var a=window.innerWidth,e=a>_,i=+t/_,r=a>O?O*n-16:a*n-16,c=A?r:.66*r;console.log({imgWidth:c,islandWidth:r,new:c*i});var l=e?_:a;return console.log({biggerThanExhibit:e,width:l,origHeight:t,new:t*l/_}),c*i}function I(){A=window.innerWidth<x,f.selectAll(".tile, .annotation--desktop").style("height",function(t){return"".concat(H(t[0].imHeight),"px")}),T()}function M(t){t.selectAll("ul").selectAll(".animal--facility").data(function(t){var n=t.animal;return h.filter(function(t){return t.animal===n}).map(function(n){return s({},n,{tile:t.tile,positionX:t.positionX})})}).join(function(t){t.append("li").attr("class","animal--facility").html(function(t){return"<span class='facility--name'>".concat(t.facility,"</span> <span class='video--icon'>").concat(i.default,"</span>")}).attr("data-id",function(t){return t.id}).attr("data-animal",function(t){return t.animal}).attr("data-tile",function(t){return t.tile}).classed("selected",function(t){var n=d.select('[data-exhibit="'.concat(t.tile,'"]')).selectAll(".cam__display").filter(function(n,a,e){return d3.select(e[a]).attr("data-animal")===t.animal}).attr("data-id");return t.id===n}).on("click",W).select(".video--icon").classed("is-hidden",function(t){var n=d.select('[data-exhibit="'.concat(t.tile,'"]')).selectAll(".cam__display").filter(function(n,a,e){return d3.select(e[a]).attr("data-animal")===t.animal}).attr("data-id");return t.id!==n})})}function T(){if(!0===A&&!1===w)w=!0,M(m.selectAll(".g-anno").data(v).join(function(t){var n=t.append("div").attr("class","g-anno").attr("data-list",function(t){return t.animal}).style("align-self",function(t){return"L"===t.positionX?"flex-start":"flex-end"});return n.append("h3").attr("class","animal--name").text(function(t){return t.animal}).attr("data-animal",function(t){return t.animal}).style("text-align",function(t){return"L"===t.positionX?"left":"right"}).on("click","launchModal"),n.append("ul").attr("class","animal--list").attr("data-animal",function(t){return t.animal}),n}));else if(!1===A&&!1===j){j=!0,M(f.selectAll(".g-island").selectAll(".annotation--desktop").data(function(t){return[t.values]}).join(function(t){return t.append("div").attr("class","annotation--desktop")}).style("grid-template-rows",function(t){return N(t)}).selectAll(".g-anno").data(function(t){return t}).join(function(t){var n=t.append("div").attr("class","g-anno").attr("data-list",function(t){return t.animal});return n.append("h3").attr("class","animal--name").text(function(t){return t.animal}).attr("data-animal",function(t){return t.animal}).on("click",Y),n.append("ul").attr("class","animal--list").attr("data-animal",function(t){return t.animal}),n}).style("grid-area",function(t,n){return console.log({d:t}),"".concat(2*t.positionY," / 1 / span 1 / span 1 ")}))}}function W(){var t=d3.select(this),n=t.attr("data-id"),a=t.attr("data-animal"),e=t.attr("data-tile"),i=d.select('[data-exhibit="'.concat(e,'"]')),r=null;(r=A?m.selectAll("ul").filter(function(t,n,e){return d3.select(e[n]).attr("data-animal")===a}).selectAll("li"):i.selectAll("ul").filter(function(t,n,e){return d3.select(e[n]).attr("data-animal")===a}).selectAll("li")).classed("selected",!1),r.selectAll(".video--icon").classed("is-hidden",!0),t.classed("selected",!0),t.select(".video--icon").classed("is-hidden",!1);var c=i.selectAll(".cam__display").filter(function(t,n,e){return d3.select(e[n]).attr("data-animal")===a});"png"===c.attr("data-type")?c.attr("src","https://pudding-data-processing.s3.amazonaws.com/zoo-cams/stills/".concat(n,".png")).attr("data-id",n):c.attr("src","https://pudding-data-processing.s3.amazonaws.com/zoo-cams/output/".concat(n,".gif")).attr("data-id",n)}function N(t){var n=d3.max(t.map(function(t){return t.positionY})),a=P[n],e=k[n];return 1===n?"".concat(a," 1fr ").concat(a):"".concat(a," repeat(").concat(n-1,", minmax(0, 1fr) ").concat(e,") minmax(0, 1fr) ").concat(a)}function L(){var t=y;f.selectAll(".g-island").data(t).join(function(t){return t.append("div").attr("class","g-island").attr("data-exhibit",function(t){return"".concat(t.key)})}).selectAll(".tile").data(function(t){return[t.values]}).join(function(t){var n=t.append("div").attr("class",function(t){return"tile tile__".concat(t[0].shape)}).style("grid-template-rows",function(t,n){return N(t)});return n.append("img").attr("class","exhibit").attr("src",function(t){return"assets/images/".concat(t[0].tile,"-0.PNG")}).style("grid-area",function(t,n,a){return t[0].index%2!=0||A?"1 / 1 / ".concat(t.length+1," / 3"):"1 / 2 / ".concat(t.length+1," / 4")}),n.append("img").attr("class","exhibit-top").attr("src",function(t){return"assets/images/".concat(t[0].tile,"-2.PNG")}).style("grid-area",function(t,n,a){return t[0].index%2!=0||A?"1 / 1 / ".concat(t.length+1," / 3"):"1 / 2 / ".concat(t.length+1," / 4")}),n}).selectAll(".cam__display").data(function(t){return t}).join(function(t){t.append("img").attr("class","cam__display").attr("data-id",function(t){return t.camera[0]}).attr("data-type","png").attr("data-animal",function(t){return t.animal}).style("justify-self",function(t){return"R"===t.positionX?"start":"end"}).style("margin-right",function(t){return"R"===t.positionX?0:"4%"}).style("margin-left",function(t){return"R"===t.positionX?"-4%":0}).attr("src",function(t){return"https://pudding-data-processing.s3.amazonaws.com/zoo-cams/stills/".concat(t.camera[0],".png")}).style("grid-area",function(t,n){return G(t,n)}).on("click",Y)})}function V(){var t=y;return new Promise(function(a){for(var e=[],i=function(i){var r=(0,n.default)("assets/images/".concat(t[i].key,"-0.PNG"));r.then(function(n){n.onload(function(){i===t.length&&a()})}),e.push(r)},r=0;r<t.length;++r)i(r);Promise.all(e).then(a).catch(function(t){return console.log("Error in loading images")})}).catch(function(t){return console.error(t)})}function B(){d3.json("https://pudding-data-processing.s3.amazonaws.com/zoo-cams/timestamps.json").then(function(t){var n=t.map(function(t){return s({},t,{id:+t.id,timestamp:+t.timestamp})}).sort(function(t,n){return d3.descending(t.timestamp,n.timestamp)}).shift(),a=Date.now(),e=d3.timeMinute.count(n.timestamp,a);g.text(function(){return e<60?"~".concat(e," minutes ago"):"~".concat(d3.timeHour.count(n.timestamp,a)," hours ago")})}).catch(new Error("Couldn't load timestamp data"))}function C(){(0,t.default)(["assets/data/arrangement.csv","assets/data/links.csv"]).then(function(t){return R(t)}).then(function(){return V()}).then(function(){L(),B(),c.default.init(v)}).then(function(){I(),S(),D()})}var F={init:C,resize:I};exports.default=F;
},{"./load-data":"xZJw","./utils/load-image-promise":"VKu2","intersection-observer":"CRRU","scrollama":"vL5c","./utils/unique":"Na4G","./videoSVG":"drU0","./modal":"hR3q","./globe":"CAFt"}],"v9Q8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=[{image:"2018_02_stand-up",url:"2018/02/stand-up",hed:"The Structure of Stand-Up Comedy"},{image:"2018_04_birthday-paradox",url:"2018/04/birthday-paradox",hed:"The Birthday Paradox Experiment"},{image:"2018_11_boy-bands",url:"2018/11/boy-bands",hed:"Internet Boy Band Database"},{image:"2018_08_pockets",url:"2018/08/pockets",hed:"Womenâ€™s Pockets are Inferior"}],t=null;function n(e,t){var n=document.getElementsByTagName("script")[0],o=document.createElement("script");return o.src=e,o.async=!0,n.parentNode.insertBefore(o,n),t&&"function"==typeof t&&(o.onload=t),o}function o(t){var n=new XMLHttpRequest,o=Date.now(),r="https://pudding.cool/assets/data/stories.json?v=".concat(o);n.open("GET",r,!0),n.onload=function(){if(n.status>=200&&n.status<400){var o=JSON.parse(n.responseText);t(o)}else t(e)},n.onerror=function(){return t(e)},n.send()}function r(e){return"\n\t<a class='footer-recirc__article' href='https://pudding.cool/".concat(e.url,"' target='_blank' rel='noopener'>\n\t\t<img class='article__img' src='https://pudding.cool/common/assets/thumbnails/640/").concat(e.image,".jpg' alt='").concat(e.hed,"'>\n\t\t<p class='article__headline'>").concat(e.hed,"</p>\n\t</a>\n\t")}function a(){var e=window.location.href,n=t.filter(function(t){return!e.includes(t.url)}).slice(0,4).map(r).join("");d3.select(".pudding-footer .footer-recirc__articles").html(n)}function s(){o(function(e){t=e,a()})}var c={init:s};exports.default=c;
},{}],"epB2":[function(require,module,exports) {
"use strict";var e=n(require("lodash.debounce")),i=n(require("./utils/is-mobile")),s=n(require("./utils/link-fix")),t=n(require("./graphic")),a=n(require("./arrangement")),l=n(require("./footer"));function n(e){return e&&e.__esModule?e:{default:e}}var d=d3.select("body"),r=0;function o(){var e=d.node().offsetWidth;r!==e&&(r=e,t.default.resize(),a.default.resize())}function c(){if(d.select("header").classed("is-sticky")){var e=d.select(".header__menu"),i=d.select(".header__toggle");i.on("click",function(){var s=e.classed("is-visible");e.classed("is-visible",!s),i.classed("is-visible",!s)})}}function u(){(0,s.default)(),d.classed("is-mobile",i.default.any()),window.addEventListener("resize",(0,e.default)(o,150)),c();console.log({test:new Date("https://pudding-data-processing.s3.amazonaws.com/zoo-cams/stills/20.png".lastModified)}),a.default.init(),l.default.init()}window.addEventListener("scroll",function(e){var i=window.pageYOffset;d3.select(".background").style("top","".concat(.1*-i,"px"))}),u();
},{"lodash.debounce":"or4r","./utils/is-mobile":"WEtf","./utils/link-fix":"U9xJ","./graphic":"TAPd","./arrangement":"S90c","./footer":"v9Q8"}]},{},["epB2"], null)